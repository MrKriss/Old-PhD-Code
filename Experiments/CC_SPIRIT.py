# -*- coding: utf-8 -*-"""Created on Wed May 18 11:23:36 2011Test SPIRIT on Contol Time Series @author: - Musselle"""from ControlCharts import Tseriesfrom CUSUM import cusum import numpy as npimport matplotlib.pyplot as pltfrom Frahst_v3_1 import FRAHST_V3_1from SPIRIT import SPIRITfrom utils import analysis, QRsolveA, pltSummary#===============================================================================# Runscript #===============================================================================#============# Initialise#============'Create time series string'series_1 = Tseries(0)series_2 = Tseries(0)series_3 = Tseries(0)series_4 = Tseries(0)series_5 = Tseries(0)# S 1# CYCLIC - Normal - Cyclicseries_1.cyclicEt(100, base=6, noise=0.1, amp=2, period=5, phase=0, \                    noise_type = 'gauss')series_1.normalEt(100, base=6, noise = 0.00000000000000001, noise_type ='gauss')series_1.cyclicEt(100, base=6, noise=0.1, amp=2, period=5, phase=0, \                    noise_type = 'gauss')# S 2# Cyclic series_2.cyclicEt(300, base=6, noise = 0.1, amp=2, period=5, phase=1.5, \                    noise_type = 'gauss')# S 3# Cyclic series_3.cyclicEt(300, base=6, noise=0.1, amp=2, period=5, phase=0.5, \                    noise_type = 'gauss')# S 4# Cyclic series_4.cyclicEt(300, base=1, noise=0.1, amp=2, period=5, phase=0.2, \                    noise_type = 'gauss')# S 5# Cyclic series_5.cyclicEt(300, base=5, noise=0.1, amp=2, period=5, phase=0.3, \                    noise_type = 'gauss')# Combine time series#streams = np.transpose(np.vstack((series_1, series_2)))streams = np.transpose(np.vstack((series_1, series_2, series_3)))#streams = np.transpose(np.vstack((series_1, series_2, series_3, series_4)))#streams = np.transpose(np.vstack((series_1, series_2, series_3, series_4, series_5)))# Run SPIRIT and Frahst# Parameterse_high = 0.99e_low = 0.98alpha = 0.94holdOFF = 0.0        #var_vals = [0.98, 0.96, 0.94, 0.92, 0.9]var_vals = [0.88, 0.86, 0.84, 0.82, 0.8]        # Run mini Batch         for val in var_vals :             # Variable to alter        alpha = val     # SPIRIT    res_sp, all_weights = SPIRIT(streams, [e_low, e_high], alpha)     res_sp['Alg'] = 'My SPIRIT with alpha = ' + str(val)        pltSummary(res_sp, streams)    # My version of Frahst     res_fr = FRAHST_V3_1(streams, alpha=alpha, e_low=e_low, e_high=e_high,                      holdOffTime=holdOFF, fix_init_Q = 1, r = 1, evalMetrics = 'F')     res_fr['Alg'] = 'My FRAHST with alpha = ' + str(val)        # metric_me, sets_me, anom_det_tab_me = analysis(res_me, AbileneMat['P_g_truth_tab'], n)    pltSummary(res_fr, streams)    